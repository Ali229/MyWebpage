<div style="text-align: center;">
  <span *ngIf="ts.loading" class="spinner-border" style="width: 8rem; height: 8rem;" role="status"></span>
</div>
<div *ngIf="!ts.error else elseBlock">
  <div *ngIf="movie" [hidden]="ts.loading" class="mt-2">
    <div class="row ml-md-3">
      <div class="col-12 col-md-4 animated zoomIn text-light">
        <div class="row">
          <img *ngIf="movie.poster_path" class="poster" src="{{'https://image.tmdb.org/t/p/w500/' + movie.poster_path}}"
               alt="Can't load image">
          <img *ngIf="!movie.poster_path" class="poster" src="assets/404PosterNotFound.jpg" alt="Can't load image">
        </div>
        <div class="row poster-buttons z-depth-3">
          <div class="col-auto p-0">
            <div class="watchlist" (click)="addToWatchlist()">
              <i class="fas fa-bookmark"></i> Watchlist
            </div>
          </div>
          <div class="col-auto ml-auto p-0">
            <div class="love">
              <i class="fas fa-heart"></i>
            </div>
          </div>
          <div class="col-auto p-0">
            <div class="trailer">
              <i class="fas fa-play"></i>
            </div>
          </div>
        </div>
        <app-stream></app-stream>
      </div>
      <div class="col-12 col-md-8 bodyText">
        <div class="ml-1 ml-md-3 mt-2 mt-md-0">
          <div class="row">
            <h2><b>{{movie.title ? movie.title : movie.name}} <span
              class="year text-muted">({{movie.release_date ?
              (movie.release_date | date:'yyyy') : (movie.first_air_date | date:'yyyy')}})
            </span></b></h2>
          </div>
          <div class="row">

            <!--                    <span *ngIf="movie.Rated != 'N/A'">{{data.Rated}}-->
            <!--                      <span class="text-muted">|&nbsp;</span></span>-->
            <!--                    <span *ngIf="data.Released != 'N/A'">{{data.Released}}-->
            <!--                      <span class="text-muted">|&nbsp;</span></span>-->
            <span>{{movie.release_date ? (movie.release_date | date:'d MMMM yyyy') : (movie.first_air_date | date:'d MMMM yyyy')}}
              <span class="text-muted">&nbsp;|&nbsp;&nbsp;</span></span>
            <span *ngIf="movie.genres">
            <ng-container
              *ngFor="let genre of movie.genres;  let isLast=last">{{genre.name}}{{isLast ? '' : ', '}} </ng-container>
            <span class="text-muted">&nbsp;|&nbsp;&nbsp;</span></span>
            <span *ngIf="movie.runtime">{{getRuntime()}}<span class="text-muted">&nbsp;|&nbsp;&nbsp;</span></span>
            <span *ngIf="movie.original_language">{{getLanguage()}}</span>

          </div>
          <div class="row">
            <div *ngIf="movie.tagline">
              <div class="mt-3 text-muted font-italic">{{movie.tagline}}</div>
            </div>
          </div>
          <div class="row">
            <div *ngIf="movie.overview">
              <h3 class="mt-3"><b>Plot</b></h3>
              <div>{{movie.overview}}</div>
            </div>
          </div>
          <div class="row">
            <h3 *ngIf="movie.vote_average" class="mt-4"><b>Ratings</b></h3>
            <table class="ratings" mdbTable borderless="true">
              <tbody>
              <tr *ngIf="movie.vote_average > 0">
                <td><img class="icon" src="assets/tmdb.png" alt="Can't load image"></td>
                <td><span class="badge badge-{{ts.getRatingColor(movie.vote_average * 10)}} animated zoomIn z-depth-3"
                >{{movie.vote_average * 10}}</span></td>
              </tr>
              <!--            <tr *ngIf="data.Metascore != 'N/A'">-->
              <!--              <td><img class="icon" src="assets/meta.png" alt="Can't load image"></td>-->
              <!--              <td><span class="badge badge-{{metaColor}} animated zoomIn z-depth-3"-->
              <!--              >{{data.Metascore}}</span></td>-->
              <!--            </tr>-->
              <!--            <tr *ngIf="data.imdbRating != 'N/A'">-->
              <!--              <td><img class="icon" src="assets/imdb.jpg" alt="Can't load image"-->
              <!--                       style="border-radius: 15px;"></td>-->
              <!--              <td><span class="badge badge-{{imdbColor}} animated zoomIn z-depth-3"-->
              <!--              >{{data.imdbRating}}</span></td>-->
              <!--            </tr>-->
              <!--            <tr>-->
              <!--            <tr *ngIf="rottenScore !=  null">-->
              <!--              <td><img class="icon" src="assets/{{rottenImage}}" alt="Can't load image"-->
              <!--                       style="border-radius: 15px;"></td>-->
              <!--              <td><span class="badge badge-{{rottenColor}} animated zoomIn z-depth-3"-->
              <!--              >{{rottenScore}}</span></td>-->
              <!--            </tr>-->
              <!--            <tr *ngIf="overallScore !=  0 && scoreCount > 1">-->
              <!--              <td><img class="icon" src="assets/avg.png" alt="Can't load image"-->
              <!--                       style="border-radius: 15px;"></td>-->
              <!--              <td><span class="badge badge-{{totalColor}} animated zoomIn z-depth-3">{{overallScore}}</span></td>-->
              <!--            </tr>-->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<ng-template #elseBlock>
  <div class="alert alert-danger" role="alert">
    No results for {{ts.errorTitle}}!
  </div>
</ng-template>
